.\" Man page for agexport
.\" Use the following command to view man page:
.\"
.\"  tbl agexport.1 | nroff -man | less
.\"
.TH AGEXPORT 1 "September 23, 2006"
.SH NAME
agexport \- A tool to export Emdros databases in Annotation Graph (AG) XML format
.SH SYNOPSIS
\fBagexport\fR [ options ]
.br
.SH DESCRIPTION
\fBagexport\fR is a command-line tool to export Emdros databases in
Annotation Graph XML format.

.SH OPTIONS
\fBagexport\fR supports the following command-line switches:
.TP 6
.BI \-\-help
show help
.TP
.BI \-V\ ,\ \-\-version
show version
.TP
.BI \-b\ ,\ \-\-backend \ backend
set database backend to `backend'. Valid values are: For PostgreSQL:
"p", "pg", "postgres", and "postgresql". For MySQL: "m", "my", and
"mysql". For SQLite 2.X.X: "s", "l", "lt", "sqlite", and
"sqlite2". For SQLite 3.X.X: "3", "s3", "lt3", and "sqlite3".
.TP
.BI \-o\ ,\ \-\-output \ filename
dump to file filename. The default is "-", which means "standard output".
.TP
.BI \-e\ ,\ \-\-encoding \ enc
set encoding to use in XML declaration (no conversion is
performed!). This can be either iso_8859-1 to iso_8859-16 (except 12
and 13), or UTF8 (default is 'UTF8').
.TP
.BI \-h\ ,\ \-\-host \ hostname 
set db back-end hostname to connect to (default is 'localhost').  Has
no effect on SQLite.
.TP
.BI \-u\ ,\ \-\-user \ user
set database user to connect as (default is 'emdf').  Has no effect on
SQLite.
.TP
.BI \-p\ ,\ \-\-password \ password
set password to use for the database user.  Has no effect on SQLite,
unless you have an encryption-enabled SQLite, in which case this gets
passed as the key.

.TP
.BI \-n\ ,\ \-\-nop 
do not print results (no output)

.SH AGXML FORMAT

The EMdF model is mapped to the Annotation Graph format as follows.

There is precisely one (1) Timeline tag with an ID of "E1".

Each ObjectType gives rise to precisely one (1) AG element, which
references the E1 timeline.

In each AG element, anchors are emitted for all monads m where m is
taken from all the start-and-end points of all monad set elements of
all objects in the object type.  Then each Anchor element has
id="OT_m", offset="m", and unit="monad", where OT is the object type
name, and "m" is the monad defined above, represented in base 10.

After the Anchor elements, the Annotation elements are given as
follows.  For each object O, and each monad set element MSE in O, we
emit an Annotation with id OT_IDD_MF (where OT is the name of the
object type, IDD is the id_d of the object O, and MF is the first
monad of the MSE).  The Annotation has type="Object", and
start="OT_MF" and end="OT_ML", where OT and MF are defined as above,
and ML is the last monad of the monad set element MSE.

Inside each Annotation (i.e., each Monad Set Element), we always emit
the feature "self" (giving the id_d of the object).  For the first
Monad Set Element in each object, we additionally emit all other
features.  For the remaining Monad Set Elements in the object, we only
emit the "self" feature.

The AGXML DTD is emitted at the top, preceded by the XML declaration
using the encoding specified on the command-line (UTF-8 by default).


.SH RETURN VALUES
.TP
.BR 0 " Success"
.TP
.BR 1 " Wrong usage"
.TP
.BR 2 " Connection to backend server could not be established"
.TP
.BR 3 " An exception occurred (the type is printed on stderr)"
.TP
.BR 4 " Could not open file"
.TP
.BR 5 " Database error"
.TP
.BR 6 " Compiler error (internal error)"
.SH AUTHORS
Written Ulrik Sandborg-Petersen (ulrikp@emdros.org).
